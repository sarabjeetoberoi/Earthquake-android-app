var AsyncDesktopSparkle=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(2),o=r(i),a=n(5),c=r(a),u=n(9),l=r(u);!function(e){var t=null;e.pdagDesktopSparkleClientContext&&(t=new o["default"](e.pdagDesktopSparkleClientContext.baseUrl,e.pdagDesktopSparkleClientContext));try{var n=new c["default"];if(n.init(),e.pdagDesktopSparkleClientContext){var r=new l["default"](e.pdagDesktopSparkleClientContext);r.attachGlobals()}}catch(i){if(t)if(i&&i.stack){var a=i.message||"No error message",u=a+" : "+i.stack;t.addCount(o["default"].EVENT_NAMES.UNCAUGHT_ERROR,u.length<500?u:u.substring(0,500))}else{var s=i?JSON.stringify(i):"No error info";t.addCount(o["default"].EVENT_NAMES.UNCAUGHT_ERROR,s.length<500?s:s.substring(0,500))}}}(window)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function g(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:g(i,t,n)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(n)},l=n(3),s=r(l),d=.1,f="clmet",p="da-cx-metrics",h=["shazamId","templateName","locale","adServer","templateMajorVersion","templateMinorVersion","adId","creativeId","impressionId"],v=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,p));return r.shouldFireMetrics=Math.random()<=d,r.timers={},r.adInfo=n,h.forEach(function(e){if(!Object.prototype.hasOwnProperty.call(n,e))throw new Error("ShazamLogger missing adInfo property: "+e)}),r}return a(t,e),c(t,[{key:"firePixel",value:function(e){this.shouldFireMetrics&&(e.i=encodeURIComponent(this.adInfo.impressionId),e.app=encodeURIComponent(f),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"firePixel",this).call(this,e))}},{key:"logEvent",value:function(e,t,n){var r={};if(null!=e&&null!=t){try{n&&(r.type=n),r.en=e,r.ev=JSON.stringify(t)}catch(i){r.stringifyNotAvailable=1}this.firePixel(r)}}},{key:"logImpression",value:function(){var e=this.adInfo,t={s:e.shazamId,n:encodeURIComponent(e.templateName),l:e.locale,as:e.adServer,tmjv:e.templateMajorVersion,tmnv:e.templateMinorVersion,ai:e.adId,ci:e.creativeId,i:e.impressionId,imp:1};navigator&&(t.ua=encodeURIComponent(navigator.userAgent)),this.firePixel(t)}},{key:"startTimer",value:function(e){this.timers[e]=new Date}},{key:"endTimer",value:function(e){if(this.timers[e]){var n=new Date-this.timers[e];this.logEvent(e,n,t.EVENT_TYPES.TIMER),delete this.timers[e]}}},{key:"addCount",value:function(e,n){n=n||1,this.logEvent(e,n,t.EVENT_TYPES.COUNTER)}}]),t}(s["default"]);t["default"]=v,v.EVENT_TYPES={TIMER:"timer",COUNTER:"counter",JSON:"json"},v.EVENT_NAMES={BUY_BOX_LOAD_LATENCY:"BuyBoxLoadLatency",AAN_LATENCY:"AanLatency",AAN_ERROR:"AanError",DROP_DOWN_SELECTOR:"DropDownSelector",UNCAUGHT_ERROR:"UncaughtError",UNDEFINED_TRACKER_ARG:"UndefinedTrackerArg",COORDINATOR_TRACKER:"CoordinatorTracker",IMAGE_LOAD_LATENCY:"ImageLoadLatency",CREATIVE_LOAD_LATENCY:"CreativeLoadLatency"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4).getQueryString,a=function(){function e(t,n){r(this,e),this.baseUrl=t,this.channel=n}return i(e,[{key:"getPixelUrl",value:function(e){var t="?"+encodeURIComponent(o(e));return this.baseUrl+"/iu3?d=forester-did&ex-fch="+this.channel+"&ex-fargs="+t+"&cb="+(new Date).getTime()}},{key:"firePixel",value:function(e){var t=new Image;return t.src=this.getPixelUrl(e),t}}]),e}();t["default"]=a},function(e,t){"use strict";function n(e,t){var n=[];for(var r in e)n.push(r+"="+e[r]);var i=n.join("&");return t?encodeURIComponent(i):i}function r(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryString=n,t.forEach=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(6),a=n(7),c=n(8),u={maxLines:2,minFontPx:18,maxFontPx:21},l=300,s=480,d=970,f=-10.087,p=-4.724,h=20.359,v=10.672,g=.02,y=function(){function e(){r(this,e),this.headlineId="pdagDesktopSparkleHeadline",this.headlineContainerId="pdagDesktopSparkleHeadlineContainer",this.templateId="pdagDesktopSparkle",this.adFeedbackButtonId="pdagDesktopSparkleFeedback",this.pdagEncapsulated="pdagEncapsulated"}return i(e,[{key:"init",value:function(){var e=this;this.addEventListenerGeneric(window,"resize",function(){e.optimizeAsinsPlacements()}),this.optimizeAsinsPlacements();var t=document.getElementById(this.pdagEncapsulated);t&&"exp"===t.getAttribute("data-impression-type")&&(this.addEventListenerGeneric(window,"resize",function(){e.setHeadlineMargin()}),this.setHeadlineMargin(),u.maxLines=3,u.minFontPx=16),(0,o.truncateText)(this.headlineId,u),(0,a.clickthroughLink)(this.templateId),(0,c.adFeedback)(this.adFeedbackButtonId)}},{key:"optimizeAsinsPlacements",value:function(){var e=document.getElementById("pdagDesktopSparkleAsinsContainer"),t=e?e.offsetWidth:0,n=null;t>0&&(l>t?n="desktopSparkle__asinsContainer--oneAsin":s>t&&(n="desktopSparkle__asinsContainer--twoAsins"),e.setAttribute("class","block desktopSparkle__asinsContainer"+(n?" "+n:"")))}},{key:"setHeadlineMargin",value:function(){var e=document.getElementById(this.headlineContainerId),t=document.getElementById(this.pdagEncapsulated);if(t&&e){var n=t.offsetWidth,r=n*g+(n>=d?f:p);r>h&&(r=h),d>n&&v>r&&(r=v),e.style&&(e.style.marginLeft=r)}}},{key:"addEventListenerGeneric",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}}]),e}();t["default"]=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=999,r="...";t.truncateText=function(e,t){var i=document.getElementById(e),o=document.createElement("div");if(i&&o){var a=i.innerHTML;a=a.replace(/\u00a0/g," "),o.innerHTML=a,a=o.textContent||o.innerHTML||"",o.textContent="",i.style.fontSize=t.maxFontPx+"px";for(var c=i.getClientRects().length,u=t.maxFontPx,l=!1,s=0;c>t.maxLines;){if(u<=t.minFontPx){l||(a+=r,l=!0);var d=a.length;a=a.substr(0,d-r.length-1)+r,i.innerHTML=a}else u--,i.style.fontSize=u+"px";if(c=i.getClientRects().length,s++,s>n)break}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=499,r=150,i=function(e){var t=o(e);t&&t.href&&(t.clickTrackerUrls&&a(t.clickTrackerUrls),setTimeout(function(){window.open(t.href,"_top")},r),e.preventDefault())},o=function(e){for(var t=e.target,r=e.currentTarget,i=0;t&&t!==r;){if("A"===t.tagName){var o=t.getAttribute("data-clickTrackerUrls");return{href:t.getAttribute("href"),clickTrackerUrls:o?o.split("|"):null}}if(t=t.parentNode,i++,i>n)break}return null},a=function(e){e.forEach(function(e){"undefined"!=typeof Image&&((new Image).src=e)})};t.clickthroughLink=function(e){var t=document.getElementById(e);t&&(t.onclick=i)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="https://www.amazon.${tld}/aan/2009-09-09/ad/feedback.${marketPlaceId}/default?pt=RemoteContent&slot=main&pt2=${marketPlaceId}-external",r=function(e){return"US"===e?"com":("UK"===e||"JP"===e?"co.":"")+e.toLowerCase()},i=function(e){return"UK"===e?"gb":e.toLowerCase()},o=function(){var e=window.parent||window,t=e.document||null;if(t){var o=t.getElementById("DA99999i");o||(o=t.createElement("iframe"),o.style.display="none",o.id="DA99999i",t.body.appendChild(o)),e.DAF=["99999","site=amazon.us;pt=Search;slot=auto-sparkle;"];var a=this.getAttribute("data-marketPlace"),c={adId:this.getAttribute("data-adId"),creativeId:this.getAttribute("data-creativeId")},u=t.createElement("script");u.src=n.replace(/\${tld}/g,r(a)).replace(/\${marketPlaceId}/g,i(a)),u.type="text/javascript",t.body.appendChild(u),o.contentWindow?o.contentWindow.aanResponse=c:o.contentDocument&&(o.contentDocument.aanResponse=c)}};t.adFeedback=function(e){var t=document.getElementById(e);t&&(t.onclick=o)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(10),u=r(c),l=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dacxLogger.logViewabilitySuccess(),n}return a(t,e),t}(u["default"]);t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),c=r(a),u=function(){function e(t){if(i(this,e),this.window=t.window||"undefined"!=typeof window&&window,!this.window||!this.window.document)throw new Error("Window and/or document is not defined");this.dacxLogger=t.dacxLogger||new c["default"](t.baseUrl,t.impressionId,t.adSessionId),this.aid=t.adId,this.cid=t.creativeId,this.dacxLogger.logImpression()}return o(e,[{key:"attachGlobals",value:function(){this.window.document.ad={aid:this.adId,cid:this.creativeId},this.window.DacxLogger=this.dacxLogger}}]),e}();t["default"]=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){var n=new d["default"](e,f),r={i:t.dacxImpressionId,asi:t.dacxSessionId,click:1};return n.getPixelUrl(r)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.generateDacxClickTrackerUrl=u;var s=n(3),d=r(s),f="416731613",p="client_imp",h="view",v=-1,g=1,y=2,m=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f));return i.impressionId=n,i.adSessionId=r,i}return c(t,e),l(t,[{key:"logMetric",value:function(e,t){var n=i({i:this.impressionId,asi:this.adSessionId},e,t||1);this.firePixel(n)}},{key:"logImpression",value:function(){this.logMetric(p)}},{key:"logViewabilitySuccess",value:function(){this.logMetric(h,g)}},{key:"logBareViewabilitySuccess",value:function(){this.logMetric(h,y)}},{key:"logViewabilityFailure",value:function(){this.logMetric(h,v)}}]),t}(d["default"]);t["default"]=m}]);